@model ContraloriaNDSWeb.Models.Company

@{
    ViewBag.Title = "Informes de Auditorías";
    Layout = "~/Views/Shared/_Layout.cshtml";
    ContraloriaNDSWeb.Models.ContraloriandsContext db = new ContraloriaNDSWeb.Models.ContraloriandsContext();
    var years = db.Years.Where(x => x.CompanyId == Model.CompanyId).ToList();

}

<section class="slice animate-hover-slide">
    <div class="w-section inverse blog-grid">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12">
                            @*<div class="w-box blog-post">*@
                            

                            <div class="col-md-12">
                                <figure>
                                    <h3>Informes de Auditoría</h3>
                                    <div class="col-md-12">
                                        <blockquote>
                                            @foreach (var ano in years)
                                            {
                                                var auditoria = db.Auditorias.Where(x => x.Year.Name == ano.Name);

                                                <p>@Html.ActionLink("Informes de Auditoría año " + ano.Name + " (" + auditoria.Count() + ")", "Auditorias", "Auditorias", new { id = ano.Name }, new { @class = "btn btn-link", @style = "font-size:medium;color:darkred" })</p>
                                            }
                                        </blockquote>

                                    </div>

                                </figure>
                            </div>

                            <div class="col-md-12">
                                <figure>
                                    <h3>Auditorías Internas</h3>
                                    <div class="col-md-12">
                                        <blockquote>
                                            @foreach (var ano in years)
                                            {
                                                var auditoriaInterna = db.AuditoriaInternas.Where(x => x.Year.Name == ano.Name);

                                                <p style="font-size:medium;color:darkred">@Html.ActionLink("Auditorías internas año " + ano.Name + " (" + auditoriaInterna.Count() + ")", "AuditoriasInternas", "Auditorias", new { id = ano.Name }, new { @class = "btn btn-link", @style = "font-size:medium;color:darkred" })</p>
                                            }
                                        </blockquote>

                                    </div>

                                </figure>
                            </div>

                            <div class="col-md-12">
                                <figure>
                                    <h3>Auditorías Externas</h3>
                                    <div class="col-md-12">
                                        <blockquote>
                                            @foreach (var ano in years)
                                            {
                                                var auditoriaExterna = db.AuditoriaExternas.Where(x => x.Year.Name == ano.Name);

                                                <p style="font-size:medium;color:darkred">@Html.ActionLink("Auditorías internas año " + ano.Name + " (" + auditoriaExterna.Count() + ")", "AuditoriasExternas", "Auditorias", new { id = ano.Name }, new { @class = "btn btn-link", @style = "font-size:medium;color:darkred" })</p>
                                            }
                                        </blockquote>

                                    </div>

                                </figure>
                            </div>

                            @*</div>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>
